(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{356:function(a,s,t){"use strict";t.r(s);var e=t(7),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"gitlab安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlab安装"}},[a._v("#")]),a._v(" GitLab安装")]),a._v(" "),s("h2",{attrs:{id:"一-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一-安装"}},[a._v("#")]),a._v(" 一. 安装")]),a._v(" "),s("h3",{attrs:{id:"_1-1-下载gitlab-rpm文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-下载gitlab-rpm文件"}},[a._v("#")]),a._v(" 1.1. 下载GitLab rpm文件")]),a._v(" "),s("p",[a._v("下载地址：https://packages.gitlab.com/gitlab/gitlab-ce")]),a._v(" "),s("p",[s("strong",[a._v("建议安装ce14版本的")])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://markdown123.oss-cn-beijing.aliyuncs.com/img/20230609154846.png",alt:""}})]),a._v(" "),s("h3",{attrs:{id:"_1-2-上传到-opt文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-上传到-opt文件"}},[a._v("#")]),a._v(" 1.2. 上传到/opt文件")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://markdown123.oss-cn-beijing.aliyuncs.com/img/20230609154954.png",alt:""}})]),a._v(" "),s("h3",{attrs:{id:"_1-3-安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-安装依赖"}},[a._v("#")]),a._v(" 1.3. 安装依赖")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" policycoreutils-python\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"_1-4-安装gitlab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-安装gitlab"}},[a._v("#")]),a._v(" 1.4. 安装gitlab")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" /opt/gitlab-ce-16.0.4-ce.0.el7.x86_64.rpm\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("注意：等待2分钟")]),a._v(" "),s("h2",{attrs:{id:"二-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二-配置"}},[a._v("#")]),a._v(" 二. 配置")]),a._v(" "),s("p",[a._v("修改/etc/gitlab/gitlab.rb文件")]),a._v(" "),s("h3",{attrs:{id:"_2-1-修改外部url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-修改外部url"}},[a._v("#")]),a._v(" 2.1. 修改外部url")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 文件32行\nexternal_url 'http://ip地址:8989'\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"_2-2-设置时区"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-设置时区"}},[a._v("#")]),a._v(" 2.2. 设置时区")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 文件68行\ngitlab_rails['time_zone'] = 'Asia/Shanghai'\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"_2-3-设置数据存储地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-设置数据存储地址"}},[a._v("#")]),a._v(" 2.3. 设置数据存储地址")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# 文件656行\ngit_data_dirs({\n    "default" => {\n        "path" => "/usr/local/gitlab/data"\n    },\n    "alternative" => {\n        "path" => "/usr/local/gitlab/data/backup"\n    }\n})\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("p",[a._v("说明：")]),a._v(" "),s("p",[a._v("​\tdefault：数据主存储路径；")]),a._v(" "),s("p",[a._v("​\talternative：数据存储备份路径，为避免因磁盘毁坏丢失源码，顾添加数据备份路径。")]),a._v(" "),s("h3",{attrs:{id:"_2-4-设置sideklq最大并发量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-设置sideklq最大并发量"}},[a._v("#")]),a._v(" 2.4. 设置sideklq最大并发量")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 文件1130行\nsidekiq['max_concurrency'] = 20\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"_2-5-设置postgresql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-设置postgresql"}},[a._v("#")]),a._v(" 2.5. 设置postgresql")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 文件1240行\npostgresql['shared_buffers'] = \"128MB\"\n# 文件1325行\npostgresql['max_worker_processes'] = 4\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"_2-6-修改nginx默认端口-避免冲突"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-修改nginx默认端口-避免冲突"}},[a._v("#")]),a._v(" 2.6. 修改nginx默认端口，避免冲突")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 文件1570\nnginx['listen_port'] = 8989\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"_2-7-关闭prometheus监控"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-关闭prometheus监控"}},[a._v("#")]),a._v(" 2.7. 关闭prometheus监控")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("prometheus_monitoring['enable'] = false\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-8-重新加载配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-重新加载配置"}},[a._v("#")]),a._v(" 2.8. 重新加载配置")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("gitlab-ctl reconfigure\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("注意：要等待10分钟")]),a._v(" "),s("h3",{attrs:{id:"_2-9-重启"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-重启"}},[a._v("#")]),a._v(" 2.9. 重启")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("gitlab-ctl restart\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-10-自启"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-自启"}},[a._v("#")]),a._v(" 2.10. 自启")]),a._v(" "),s("p",[a._v("让GitLab随Linux操作系统的启动而自动启动。")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" gitlab-runsvdir.service\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-11-端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-端口"}},[a._v("#")]),a._v(" 2.11. 端口")]),a._v(" "),s("p",[a._v("开房8989端口号，允许外部通过该端口访问GitLab。")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("firewall-cmd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8989")]),a._v("/tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("\nfirewall-cmd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--reload")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"_2-12-日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-12-日志"}},[a._v("#")]),a._v(" 2.12. 日志")]),a._v(" "),s("p",[a._v("查看GitLab日志信息")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("gitlab-ctl "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tail")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-13-访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-13-访问"}},[a._v("#")]),a._v(" 2.13. 访问")]),a._v(" "),s("p",[a._v("启动浏览器，访问"),s("code",[a._v("http://ip地址:8989")]),a._v("网址")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://markdown123.oss-cn-beijing.aliyuncs.com/img/20230609172419.png",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"三-修改root密码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三-修改root密码"}},[a._v("#")]),a._v(" 三. 修改root密码")]),a._v(" "),s("h2",{attrs:{id:"_3-1-ce14"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-ce14"}},[a._v("#")]),a._v(" 3.1. ce14")]),a._v(" "),s("p",[a._v("在/etc/gitlab/password里存放root密码")]),a._v(" "),s("h2",{attrs:{id:"_3-2-ce14以上"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-ce14以上"}},[a._v("#")]),a._v(" 3.2. ce14以上")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/qiushisoftware/article/details/112754180",target:"_blank",rel:"noopener noreferrer"}},[a._v("(57条消息) 在CentOS中安装GitLab后修改超级管理员root的密码_centos gitlab root密码_chenbinqq的博客-CSDN博客"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"四-设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四-设置"}},[a._v("#")]),a._v(" 四. 设置")]),a._v(" "),s("h2",{attrs:{id:"_4-1-设置root密码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-设置root密码"}},[a._v("#")]),a._v(" 4.1. 设置root密码")]),a._v(" "),s("h2",{attrs:{id:"_4-2-设置语言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-设置语言"}},[a._v("#")]),a._v(" 4.2. 设置语言")])])}),[],!1,null,null,null);s.default=r.exports}}]);